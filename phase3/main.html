<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phase 3 Project</title>
    <link rel="stylesheet" href="phase3.css">
</head>
<body>
    
   <!DOCTYPE html>
   
       
   </head>
   <body>
       <div class="dashboard">
           <h1>Light Dashboard</h1>
   
           
           <div class="intensity">
               <div class="icon" id="lightBulb">ðŸ’¡</div>
               <input type="range" min="0" max="1" step="0.01" value="0.5" class="slider" id="brightnessSlider" disabled>
               <div class="label">Light Intensity</div>
               <div class="value" id="intensity-value">0%</div> 
           </div>
   
           <div class="status">
               <div class="icon">ðŸ”†</div>
               <div class="label">Light Status</div>
               <div class="value" id="status-value">Off</div> 
           </div>
   
           <div class="email">
               <div class="icon">ðŸ“§</div>
               <div class="label">Email Status</div>
               <div class="value" id="email-message">no email yet...</div> 
           </div>
          
       
    
        <script>

        function sendEmail() {
            fetch('/led')
            .then(response => response.json());
            if(data.led_status == "on" && data.email_sent == True){
            const emailMsg = document.getElementById("email-message");
            emailMsg.textContent = "Email has been sent!";
            const lightStatus = document.getElementById("status-value");
            lightStatus.textContent = "On"
            
            }

        }

        function setIntensity() {
            fetch('/light') 
                .then(response => response.json())
                .then(data => {
                    const slider = document.getElementById("brightnessSlider");
                    const intensityValue = document.getElementById("intensity-value");
                    slider.value = data.light_intensity;
                    intensityValue.value = data.light_intensity;
                    if (parseFloat(data.light_intensity) < 400 && !emailSent) {
                        emailSent = true;
                        sendEmail();
                    } else if (parseFloat(data.light_intensity) >= 400) {
                        emailSent = false;
                    }
                });
        }

        setBrightness(0.8); 
        </script>
       </div>
   </body>


    <footer>
        <p>Made by: Sereen Saaida, Manas Patel, Jayda Pizzuco</p>
    </footer>

    <script>

    </script>
    

</body>
</html>
